<h1>All Products</h1>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>description</th>
      <th>price</th>
      <th>category</th>
      <th>created at</th>
      <th>updated at</th>
      <th>action</th>
    </tr>
  </thead>
  <tbody>
    <% @products.each do |product| %>
      <tr>
        <td><%= product.id %></td>
        <td><%= product.name %></td>
        <td><%= product.description %></td>
        <td><%= product.price %></td>
        <td>
          <% category = Category.find(product.category_id) %>
          <%= category.name %>
        </td>
        <td><%= product.created_at.strftime("%d.%m.%Y") %></td>
        <td><%= product.updated_at.strftime("%d.%m.%Y") %></td>
        <td>
          <%= link_to "Delete", product, data: { turbo_confirm: "Really delete this product?", turbo_method: :delete} %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h1>Category Counts</h1>
<table>
  <thead>
    <tr>
      <th>id</th>
      <th>name</th>
      <th>product count</th>
    </tr>
  </thead>
  <tbody>
    <% @categories.each do |category| %>
      <tr>
        <td><%= category.id %></td>
        <td><%= category.name %></td>
        <td><%= category.product_count %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to 'New Product', new_product_path %><br>
<%= link_to 'Back', root_path %>
